import{H as l}from"./html5-qrcode-scanner-WlYy4vny.js";import{_ as p,e as f,o as m,c as h,a as d,b as _,d as k}from"./index-Dnt0kUEN.js";const b={__name:"ScanView",setup(g){const r=k();let t=null,a={};f(e=>{e.query.scanRes=a});const s=()=>{t.stop().finally(()=>{t.clear(),r.back()})},n=e=>{a.qr=e,s()},i=()=>{t=new l("reader"),l.getCameras().then(e=>{const o={fps:10,qrbox:{width:300,height:300},aspectRatio:1.777778,showTorchButtonIfSupported:!0};if(e&&e.length){let c=e[e.length-1].id;t.start({deviceId:{exact:c}},o,n).catch(u=>{a.err=u,r.back()})}else t.start({facingMode:"environment"},o,n).catch(c=>{a.err=c,r.back()})}).catch(e=>{a.err=e,r.back()})};return m(()=>{i()}),(e,o)=>(_(),h("div",null,[d("div",{onClick:s,class:"title"},"扫码 X"),o[0]||(o[0]=d("div",{id:"reader"},null,-1))]))}},B=p(b,[["__scopeId","data-v-66921d8f"]]);export{B as default};
