import{H as s}from"./html5-qrcode-scanner-WlYy4vny.js";import{_ as i,C as m,b as p,t as f,x as h,A as _,B as b}from"./index-BzlQHrN1.js";const g={__name:"ScanView",setup(k){const o=b();let t=null,a={};m(e=>{e.params.scanRes=a});const l=()=>{t.stop().finally(()=>{t.clear(),o.back()})},n=e=>{a.qr=e,l()},u=()=>{t=new s("reader"),s.getCameras().then(e=>{const r={fps:10,qrbox:{width:300,height:300},aspectRatio:1.777778,showTorchButtonIfSupported:!0};if(e&&e.length){let c=e[e.length-1].id;t.start({deviceId:{exact:c}},r,n).catch(d=>{a.err=d,o.back()})}else t.start({facingMode:"environment"},r,n).catch(c=>{a.err=c,o.back()})}).catch(e=>{a.err=e,o.back()})};return p(()=>{u(),document.title="扫码"}),(e,r)=>(_(),f("div",null,r[0]||(r[0]=[h("div",{id:"reader"},null,-1)])))}},w=i(g,[["__scopeId","data-v-4946f771"]]);export{w as default};
