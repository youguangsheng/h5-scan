import{H as l}from"./html5-qrcode-scanner-WlYy4vny.js";import{_ as p,C as m,b as f,t as h,x as i,A as _,B as k}from"./index-BLCBQu7f.js";const b={__name:"ScanView",setup(g){const o=k();let t=null,a={};m(e=>{e.params.scanRes=a});const s=()=>{t.stop().finally(()=>{t.clear(),o.back()})},n=e=>{a.qr=e,s()},d=()=>{t=new l("reader"),l.getCameras().then(e=>{const r={fps:10,qrbox:{width:300,height:300},aspectRatio:1.777778,showTorchButtonIfSupported:!0};if(e&&e.length){let c=e[e.length-1].id;t.start({deviceId:{exact:c}},r,n).catch(u=>{a.err=u,o.back()})}else t.start({facingMode:"environment"},r,n).catch(c=>{a.err=c,o.back()})}).catch(e=>{a.err=e,o.back()})};return f(()=>{d()}),(e,r)=>(_(),h("div",null,[i("div",{onClick:s,class:"title"},"扫码 X"),r[0]||(r[0]=i("div",{id:"reader"},null,-1))]))}},w=p(b,[["__scopeId","data-v-243543f5"]]);export{w as default};
